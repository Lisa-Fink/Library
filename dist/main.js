(()=>{class e{constructor(e,t,r,o){this.title=e,this.author=t,this.pages=r,this.read=o}}const t=new class{constructor(){this.booksArr=[]}addBook(e){this.booksArr.push(e)}removeBook(e){this.booksArr=this.booksArr.slice(0,e).concat(this.booksArr.slice(e+1))}toggleRead(e){this.booksArr[e].read=!this.booksArr[e].read}},r=new e("Alice's Adventures in Wonderland","Lewis Caroll",352,!0),o=new e("The Hitchhiker's Guide to the Galaxy","Douglas Adams",254,!0);t.addBook(r),t.addBook(o);const a=(()=>{const e=document.querySelector("#author + span.error"),r=document.querySelector("#title + span.error"),o=document.querySelector("#pages + span.error");return createBookCard=e=>{const t=document.createElement("div");t.classList.add("book");const r=getBookInfo(e);t.appendChild(r);const o=createCardButtons(e);return t.appendChild(o),t},getBookInfo=e=>{let r=document.createElement("div");for(const o in t.booksArr[e]){let a=document.createElement("div");a.classList.add(o);let d="title"==o?t.booksArr[e][o]:"author"==o?`by ${t.booksArr[e][o]}`:"pages"==o?t.booksArr[e][o]>1?`${t.booksArr[e][o]} pgs`:"1 pg":t.booksArr[e][o]?"Read":"Unread";a.innerText=d,r.appendChild(a)}return r},createCardButtons=e=>{let r=document.createElement("button"),o=document.createElement("button");r.data=e,r.innerText="-",o.innerText=t.booksArr[e].read?"unread":"read",o.data=e;const a=document.createElement("div");return a.classList.add("button-div"),r.addEventListener("click",removeBook),o.addEventListener("click",changeStatus),a.appendChild(o),a.appendChild(r),a},renderBooks=()=>{const e=document.getElementById("books");e.innerHTML="";for(let r=0;r<t.booksArr.length;r++){const t=createBookCard(r);e.appendChild(t)}},removeBook=e=>{let r=e.target.data;t.removeBook(r),a.renderBooks()},changeStatus=e=>{let r=e.target.data;t.toggleRead(r),renderBooks()},showForm=()=>{document.getElementById("book-form").style.display="block"},clearForm=e=>{e.target.form[0].value="",e.target.form[1].value="",e.target.form[2].value="",e.target.form[3].checked=!0,e.target.form[4].checked=!1,document.getElementById("book-form").style.display="none",clearError("all")},clearError=t=>{"author"==t&&(e.textContent="",e.classList.remove("active")),"title"==t&&(r.textContent="",r.classList.remove("active")),"pg"==t&&(o.textContent="",o.classList.remove("active")),"all"==t&&(clearError("author"),clearError("title"),clearError("pg"))},showError=t=>{const a=document.getElementById("author"),d=document.getElementById("title"),n=document.getElementById("pages");"author"==t&&a.validity.valueMissing&&(e.classList.add("active"),e.textContent="Please enter an author"),"title"==t&&d.validity.valueMissing&&(r.classList.add("active"),r.textContent="Please enter a title"),"pg"==t&&n.validity.valueMissing&&(o.classList.add("active"),o.textContent="Please enter a number")},{renderBooks,showForm,clearForm,showError}})();(()=>{const r=document.getElementById("author"),o=document.getElementById("title"),d=document.getElementById("pages");addBook=r=>{let o=r.target.form[0].value,d=r.target.form[1].value,n=r.target.form[2].value,s=!!r.target.form[3].checked,l=new e(d,o,n,s);t.addBook(l),a.clearForm(r),a.renderBooks()},submitBook=e=>{validateForm(e)&&addBook(e)},validateForm=e=>!!(validateAuthor()&validateTitle()&validatePg()),validateAuthor=()=>r.validity.valid?(clearError("author"),!0):(a.showError("author"),!1),validateTitle=()=>o.validity.valid?(clearError("title"),!0):(a.showError("title"),!1),validatePg=()=>d.validity.valid?(clearError("pg"),!0):(a.showError("pg"),!1),addEventListeners=(document.getElementById("new-book").addEventListener("click",a.showForm),document.getElementById("add-button").addEventListener("click",submitBook),document.getElementById("cancel-button").addEventListener("click",a.clearForm),r.addEventListener("input",validateAuthor),o.addEventListener("input",validateTitle),void d.addEventListener("input",validatePg))})(),a.renderBooks()})();